{
  "meta": {
    "name": "Numbers State Machine",
    "authoritative_source": "STATE-MACHINE.md",
    "normative": true,
    "version": "2.0",
    "notes": [
      "Pause is an overlay, not a lifecycle state",
      "Authority semantics are defined in AUTHORITY-CONSUMPTION.md",
      "All timing decisions use server_time",
      "Any transition not listed is forbidden"
    ]
  },

  "auction_states": {
    "Scheduled": {
      "terminal": false,
      "description": "Auction exists but is not accepting bids"
    },
    "Open": {
      "terminal": false,
      "description": "Auction is actively accepting bids"
    },
    "Closed": {
      "terminal": false,
      "description": "Auction closed to bids and resolving"
    },
    "AwaitingSettlement": {
      "terminal": false,
      "description": "Resolution persisted; settlement outcome pending"
    },
    "Finalized": {
      "terminal": true,
      "description": "Auction outcome fixed and irreversible"
    }
  },

  "inscription_states": {
    "NotStarted": {
      "terminal": false,
      "description": "Auction finalized; no inscription attempt initiated"
    },
    "Inscribing": {
      "terminal": false,
      "description": "Inscription initiation persisted; authority consumed"
    },
    "Ambiguous": {
      "terminal": true,
      "description": "Inscription outcome uncertain; authority permanently frozen"
    },
    "Inscribed": {
      "terminal": true,
      "description": "Canonical inscription observed"
    }
  },

  "system_overlays": {
    "Paused": {
      "affects_state": false,
      "description": "System pause overlay; does not alter lifecycle state"
    }
  },

  "auction_transitions": [
    {
      "from": "Scheduled",
      "to": "Open",
      "trigger": "first_valid_bid_accepted",
      "automatic": false
    },
    {
      "from": "Open",
      "to": "Closed",
      "trigger": "current_end_time_reached_or_cap",
      "automatic": true
    },
    {
      "from": "Closed",
      "to": "AwaitingSettlement",
      "trigger": "resolution_record_persisted",
      "automatic": true
    },
    {
      "from": "AwaitingSettlement",
      "to": "Finalized",
      "trigger": "settlement_terminal",
      "automatic": true
    }
  ],

  "inscription_transitions": [
    {
      "from": "NotStarted",
      "to": "Inscribing",
      "trigger": "inscription_initiation_persisted",
      "automatic": false
    },
    {
      "from": "Inscribing",
      "to": "Inscribed",
      "trigger": "inscription_observed",
      "automatic": true
    },
    {
      "from": "Inscribing",
      "to": "Ambiguous",
      "trigger": "ambiguity_detected",
      "automatic": true
    }
  ],

  "forbidden_transitions": [
    { "from": "Open", "to": "Scheduled" },
    { "from": "Closed", "to": "Open" },
    { "from": "AwaitingSettlement", "to": "Open" },
    { "from": "Finalized", "to": "*" },
    { "from": "Inscribed", "to": "*" },
    { "from": "Ambiguous", "to": "*" }
  ],

  "timing_rules": {
    "time_source": "server_time",
    "open_to_closed_condition": "server_time >= current_end_time",
    "scheduled_to_open_never_time_driven": true
  },

  "extension_model": {
    "base_end_time_immutable": true,
    "current_end_time_derived": true,
    "formula": "base_end_time + (extension_increment * number_of_extension_events)",
    "extension_event_required_for_change": true,
    "max_extensions_enforced": true
  },

  "final_rule": "If a transition is not explicitly listed as allowed, it is forbidden."
}