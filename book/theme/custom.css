/* =========================================================
   Numbers mdBook custom.css
   Grayscale, calm hierarchy, readable on mobile
   Fixes:
   - Light mode sidebar contrast
   - Variable driven colors
   - Avoid hardcoded white text in light mode
   ========================================================= */


/* ---------------------------------------------------------
   0) BASE SCALE
   --------------------------------------------------------- */

html {
  font-size: 125%;
}


/* ---------------------------------------------------------
   1) COLOR PALETTE
   Tune these variables to adjust contrast.
   --------------------------------------------------------- */

/* Default is dark mode */
:root{
  --bg: #161616;
  --fg: #c2c2c2;

  --sidebar-bg: #161616;
  --sidebar-fg: #b3b3b3;

  --links: #e6e6e6;
  --links-hover: #ffffff;

  --inline-code-bg: #1c1c1c;
  --code-bg: #1c1c1c;

  --border-color: #2a2a2a;

  --nav-gutter: 9rem;
}

/* Light mode overrides */
@media (prefers-color-scheme: light){
  :root{
    --bg: #f6f6f6;
    --fg: #2f2f2f;

    --sidebar-bg: #ededed;
    --sidebar-fg: #2f2f2f;

    --links: #111111;
    --links-hover: #000000;

    --inline-code-bg: #e6e6e6;
    --code-bg: #e6e6e6;

    --border-color: #d0d0d0;
  }
}


/* ---------------------------------------------------------
   2) GLOBAL TYPOGRAPHY AND BACKGROUNDS
   --------------------------------------------------------- */

body{
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    Helvetica,
    Arial,
    sans-serif;

  line-height: 1.7;
  font-weight: 400;

  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  background: var(--bg);
  color: var(--fg);
}

/* Reinforce body color */
p, li, blockquote, .content{
  color: var(--fg);
}

p{ margin: .75em 0; }
li{ margin: .35em 0; }


/* ---------------------------------------------------------
   2a) TITLES
   Book title and page H1 intentionally identical.
   --------------------------------------------------------- */

.page h1,
.book-header h1,
.menu-title{
  font-size: 2.4rem;
  font-weight: 400;
  line-height: 1.25;
  letter-spacing: 0.01em;
  color: var(--fg);
}

/* Secondary headings keep hierarchy */
h2{
  font-size: 1.8rem;
  font-weight: 450;
  color: #d0d0d0;
}

h3{
  font-size: 1.4rem;
  font-weight: 450;
  color: #c8c8c8;
}

/* Light mode heading colors */
@media (prefers-color-scheme: light){
  h2, h3{
    color: #1a1a1a;
  }
}


/* ---------------------------------------------------------
   3) CONTENT LAYOUT
   Keep nav arrows from overlapping text.
   --------------------------------------------------------- */

.content{
  max-width: 760px;
  padding-left: var(--nav-gutter);
  padding-right: var(--nav-gutter);
}

/* Keep arrows visually minimal */
.nav-chapters{
  background: transparent !important;
}

/* Smaller gutters on small screens */
@media (max-width: 600px){
  :root{ --nav-gutter: 2.25rem; }
}


/* ---------------------------------------------------------
   4) INLINE LINKS
   Visible, not loud.
   --------------------------------------------------------- */

.content a{
  color: var(--links);
  text-decoration: none;
  font-weight: 450;
}

.content a:hover{
  color: var(--links-hover);
  text-decoration: underline;
}


/* ---------------------------------------------------------
   5) SIDEBAR BACKGROUND AND BEHAVIOR
   Desktop pinned. Mobile remains mobile.
   --------------------------------------------------------- */

.sidebar,
.sidebar-scrollbox{
  background: var(--sidebar-bg) !important;
}

/* Desktop pin behavior */
@media (min-width:1200px){
  html.sidebar-hidden .sidebar,
  html.sidebar-hidden .sidebar-scrollbox{
    transform: none !important;
    visibility: visible !important;
  }

  html.sidebar-hidden .page-wrapper{
    margin-left: var(--sidebar-width) !important;
  }
}


/* ---------------------------------------------------------
   6) SIDEBAR LINK STATES
   Variable driven, readable in light mode.
   This replaces the hardcoded white and gray that broke mobile.
   --------------------------------------------------------- */

/* Base sidebar links */
.sidebar a,
.sidebar a:visited{
  color: var(--sidebar-fg) !important;
  text-decoration: none !important;
  font-weight: 450;
  opacity: 0.75;
}

.sidebar a:hover,
.sidebar a:focus{
  color: var(--links-hover) !important;
  opacity: 1;
}

/* Active link */
.sidebar a.active,
.sidebar a.active:hover,
.sidebar a.active:focus{
  color: var(--links-hover) !important;
  font-weight: 650;
  opacity: 1;
  background: transparent !important;
}

/* Sidebar section labels like Orientation, System Definition */
.sidebar .chapter > li > strong,
.sidebar .chapter li.part-title,
.sidebar h2,
.sidebar h3{
  color: var(--sidebar-fg) !important;
  opacity: 0.95;
  font-weight: 600;
}

/* Light mode specificity */
@media (prefers-color-scheme: light){
  .sidebar a,
  .sidebar a:visited{
    color: #2b2b2b !important;
    opacity: 0.80;
  }

  .sidebar a:hover,
  .sidebar a:focus{
    color: #000000 !important;
    opacity: 1;
  }

  .sidebar a.active,
  .sidebar a.active:hover,
  .sidebar a.active:focus{
    color: #000000 !important;
    font-weight: 700;
    opacity: 1;
  }

  .sidebar .chapter > li > strong,
  .sidebar .chapter li.part-title,
  .sidebar h2,
  .sidebar h3{
    color: #1a1a1a !important;
    opacity: 1;
  }
}


/* ---------------------------------------------------------
   7) TABLES
   Calm, left-aligned, readable.
   --------------------------------------------------------- */

table{
  margin-left: 0;
  margin-right: 0;
}

th, td{
  text-align: left;
  padding-top: 0.6rem;
  padding-bottom: 0.6rem;
}

/* Space multiple tables */
table + table{
  margin-top: 2rem;
}

/* Optional epigraph feel for first table */
table:first-of-type{
  max-width: 30rem;
}

/* Allow tables to exceed text column */
.content table{
  width: calc(100vw - (2 * var(--nav-gutter)));
  max-width: 750px;
}


/* ---------------------------------------------------------
   8) CODE BLOCKS AND INLINE CODE
   Consistent with palette.
   --------------------------------------------------------- */

code{
  background: var(--inline-code-bg);
  padding: 0.1em 0.25em;
  border-radius: 6px;
}

pre code{
  background: transparent;
  padding: 0;
  border-radius: 0;
}

pre{
  background: var(--code-bg);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 1rem;
  overflow: auto;
}
